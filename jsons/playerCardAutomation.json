{
    "automation": {
        "cards": {
            "4c4cccd3-576a-41f1-8b6c-ba11b4cc3d4b": {
                "_comment": "Celeborn",
                "rules": {
                    "celebornEnterPlayTokens": {
                        "_comment": "If Celeborn is in play, add tokens to Silvan allies that enter play.",
                        "type": "trigger",
                        "listenTo": ["/cardById/*/inPlay"],
                        "condition": ["AND", "$THIS.inPlay", "$TARGET.inPlay", ["PREV", ["NOT", "$TARGET.inPlay"]], ["IN_STRING", "$TARGET.currentFace.traits", "Silvan."], ["EQUAL", "$TARGET.currentFace.type", "Ally"]],
                        "then": [
                            ["LOG", "└── ", "Added 1 willpower, 1 attack, and 1 defense token to ", "$TARGET.currentFace.name", "."],
                            ["ADD_TEMP_TOKEN", "round", "$TARGET_ID", "willpower", 1],
                            ["ADD_TEMP_TOKEN", "round", "$TARGET_ID", "attack", 1],
                            ["ADD_TEMP_TOKEN", "round", "$TARGET_ID", "defense", 1]
                        ]
                    }
                }
            },
            "afec8b6f-6838-442e-b2a8-71537a25e05d": {
                "_comment": "Celeborn",
                "inheritFrom": "4c4cccd3-576a-41f1-8b6c-ba11b4cc3d4b"
            },
            "bbab76d6-7554-40da-af74-fb502d08d9a8": {
                "_comment": "Tom Cotton",
                "rules": {
                    "tomCottonEnterPlayTokens": {
                        "_comment": "If Tom Cotton is in play, add tokens to Hobbit allies that enter play.",
                        "type": "trigger",
                        "listenTo": ["/cardById/*/inPlay"],
                        "condition": ["AND", "$THIS.inPlay", "$TARGET.inPlay", ["PREV", ["NOT", "$TARGET.inPlay"]], ["IN_STRING", "$TARGET.currentFace.traits", "Hobbit."], ["EQUAL", "$TARGET.currentFace.type", "Ally"]],
                        "then": [
                            ["LOG", "└── ", "Tom Cotton added 2 attack to ", "$TARGET.currentFace.name", "."],
                            ["INCREASE_VAL", "/cardById/$TARGET_ID/tokens/attack", 2],
                            ["SET", "/cardById/$TARGET_ID/hasTomCottonTokens", true]
                        ]
                    },
                    "tomCottonRoundEndTokens": {
                        "type": "trigger",
                        "listenTo": ["/roundNumber"],
                        "condition": ["TRUE"],
                        "then": ["FOR_EACH_KEY_VAL", "$CARD_ID", "$CARD", "$GAME.cardById", [
                            ["COND",
                                ["AND", "$CARD.hasTomCottonTokens", "$CARD.inPlay"],
                                [
                                    ["LOG", "└── ", "Tom Cotton removed 2 attack from ", "$CARD.currentFace.name", "."],
                                    ["DECREASE_VAL", "/cardById/$CARD_ID/tokens/attack", 2],
                                    ["SET", "/cardById/$CARD_ID/hasTomCottonTokens", false]
                                ]
                            ]
                        ]]
                    }
                }
            },
            "4124136c-8c86-4f86-830c-94c8c76df161": {
                "_comment": "Sam Gamgee",
                "ability": {
                    "A": [
                        ["COND", "$THIS.exhausted", ["TOGGLE_EXHAUST", "$THIS"]],
                        ["INCREASE_VAL", "/cardById/$THIS_ID/tokens/willpower", 1],
                        ["INCREASE_VAL", "/cardById/$THIS_ID/tokens/attack", 1],
                        ["INCREASE_VAL", "/cardById/$THIS_ID/tokens/defense", 1],
                        ["INCREASE_VAL", "/cardById/$THIS_ID/samBonusesThisRound", 1]
                    ]
                },
                "rules": {
                    "samRoundEndTokens": {
                        "type": "trigger",
                        "listenTo": ["/roundNumber"],
                        "condition": ["TRUE"],
                        "then": ["FOR_EACH_KEY_VAL", "$CARD_ID", "$CARD", "$GAME.cardById", [
                            ["COND",
                                ["GREATER_THAN", "$CARD.samBonusesThisRound", 0],
                                [
                                    ["LOG", "└── ", "Removed {{$CARD.samBonusesThisRound}} willpower, {{$CARD.samBonusesThisRound}} attack, and {{$CARD.samBonusesThisRound}} defense token from ", "$CARD.currentFace.name", "."],
                                    ["DECREASE_VAL", "/cardById/$CARD_ID/tokens/willpower", "$CARD.samBonusesThisRound"],
                                    ["DECREASE_VAL", "/cardById/$CARD_ID/tokens/attack", "$CARD.samBonusesThisRound"],
                                    ["DECREASE_VAL", "/cardById/$CARD_ID/tokens/defense", "$CARD.samBonusesThisRound"],
                                    ["SET", "/cardById/$CARD_ID/samBonusesThisRound", 0]
                                ]
                            ]
                        ]]
                    }
                }
            },
            "51223bd0-ffd1-11df-a976-0801206c9005": {
                "_comment": "Leadership Dain Ironfoot",
                "rules": {
                    "dainEnterPlayTokens": {
                        "_comment": "Add tokens to Dwarf allies that enter play if Dain is in play.",
                        "type": "trigger",
                        "listenTo": ["/cardById/*/inPlay"],
                        "condition": ["AND", "$THIS.inPlay", "$TARGET.inPlay", ["PREV", ["NOT", "$TARGET.inPlay"]], ["IN_STRING", "$TARGET.currentFace.traits", "Dwarf."], ["NOT_EQUAL", "$THIS_ID", "$TARGET_ID"]],
                        "then": [
                            ["LOG", "└── ", "Added 1 willpower and 1 attack to ", "$TARGET.currentFace.name", "."],
                            ["INCREASE_VAL", "/cardById/$TARGET_ID/tokens/willpower", 1],
                            ["INCREASE_VAL", "/cardById/$TARGET_ID/tokens/attack", 1]
                        ]
                    },
                    "dainPassiveTokens": { 
                        "_comment": "Add/remove tokens on Dwarf characters depending on whether Dain is ready or not.",
                        "type": "whileInPlay", 
                        "side": "A",
                        "listenTo": ["/cardById/$THIS_ID/exhausted"],
                        "condition": ["EQUAL", "$THIS.exhausted", false],
                        "onDo": [
                            ["LOG", "└── ", "Added 1 willpower and 1 attack to each Dwarf character in play."],
                            ["FOR_EACH_KEY_VAL", "$CARD_ID", "$CARD", "$GAME.cardById", [
                            ["COND",
                                ["AND", "$CARD.inPlay", ["IN_STRING", "$CARD.currentFace.traits", "Dwarf."]],
                                [
                                    ["INCREASE_VAL", "/cardById/$CARD_ID/tokens/willpower", 1],
                                    ["INCREASE_VAL", "/cardById/$CARD_ID/tokens/attack", 1]
                                ]
                            ]]]
                        ],
                        "offDo": [
                            ["LOG", "└── ", "$THIS.controller", " removed 1 willpower and 1 attack from each Dwarf character in play."],
                            ["FOR_EACH_KEY_VAL", "$CARD_ID", "$CARD", "$GAME.cardById", [
                            ["COND",
                                ["AND", "$CARD.inPlay", ["OR", ["IN_STRING", "$CARD.currentFace.traits", "Dwarf."], ["EQUAL", "$CARD_ID", "$THIS_ID"]]],
                                [
                                    ["DECREASE_VAL", "/cardById/$CARD_ID/tokens/willpower", 1],
                                    ["DECREASE_VAL", "/cardById/$CARD_ID/tokens/attack", 1]
                                ]
                            ]]]
                        ]
                    }
                }
            },
            "347fa1ce-ec8d-43d9-a407-bc26d041b45e": {
                "_comment": "Leadership Dain Ironfoot",
                "inheritFrom": "51223bd0-ffd1-11df-a976-0801206c9005"
            },
            "052b1f85-8b9c-4bb0-a735-bdbd5ac1b2c4": {
                "_comment": "Merry",
                "rules": {
                    "merryOtherHobbitEnterLeavePlayTokens": {
                        "_comment": "Add/remove attack tokens to Merry when other Hobbit heroes enter/leave the owner's control.",
                        "type": "whileInPlay", 
                        "side": "A",
                        "listenTo": ["/cardById/*/inPlay", "/cardById/*/controller"],
                        "condition": [
                            "AND", 
                                "$TARGET.inPlay",
                                ["EQUAL", "$TARGET.controller", "$THIS.controller"]
                        ],
                        "onDo": ["COND",
                            ["AND",
                                ["IN_STRING", "$TARGET.currentFace.traits", "Hobbit."],
                                ["EQUAL", "$TARGET.currentFace.type", "Hero"],
                                ["NOT_EQUAL", "$THIS_ID", "$TARGET_ID"]
                            ],
                            [
                                ["LOG", "└── ", "Added 1 attack to Merry."],
                                ["INCREASE_VAL", "/cardById/$THIS_ID/tokens/attack", 1]
                            ]
                        ],
                        "offDo": ["COND",
                            ["AND",
                                ["IN_STRING", "$TARGET.currentFace.traits", "Hobbit."],
                                ["EQUAL", "$TARGET.currentFace.type", "Hero"],
                                ["NOT_EQUAL", "$THIS_ID", "$TARGET_ID"]
                            ],
                            [
                                ["LOG", "└── ", "Removed 1 attack from Merry."],
                                ["DECREASE_VAL", "/cardById/$THIS_ID/tokens/attack", 1]
                            ]
                        ]
                    },
                    "merryEnterLeavePlayTokens": {
                        "_comment": "Add attack to Merry when Merry enters play.",
                        "type": "passive",
                        "listenTo": ["/cardById/$THIS_ID/inPlay", "/cardById/$THIS_ID/currentSide"],
                        "condition": [
                            "AND", 
                                "$THIS.inPlay",
                                ["EQUAL", "$THIS.currentSide", "A"]
                        ],
                        "onDo": [
                            ["VAR", "$NUM_HOBBITS",
                                ["LENGTH",
                                    ["FILTER_CARDS", "$CARD", [
                                        "AND",
                                            "$CARD.inPlay",
                                            ["EQUAL", "$CARD.controller", "$THIS.controller"],
                                            ["IN_STRING", "$CARD.currentFace.traits", "Hobbit."],
                                            ["EQUAL", "$CARD.currentFace.type", "Hero"]
                                        ]
                                    ]
                                ]
                            ],
                            ["LOG", "└── ", "$THIS.controller", " added {{$NUM_HOBBITS}} attack to Merry."],
                            ["INCREASE_VAL", "/cardById/$THIS_ID/tokens/attack", "$NUM_HOBBITS"]
                        ],
                        "offDo": [
                            ["COND",
                                ["EQUAL", "$THIS.currentSide", "B"],
                                [
                                    ["VAR", "$NUM_HOBBITS",
                                        ["LENGTH",
                                            ["PREV", ["FILTER_CARDS", "$CARD", [
                                                        "AND",
                                                            "$CARD.inPlay",
                                                            ["EQUAL", "$CARD.controller", "$THIS.controller"],
                                                            ["IN_STRING", "$CARD.currentFace.traits", "Hobbit."],
                                                            ["EQUAL", "$CARD.currentFace.type", "Hero"]
                                                        ]
                                                    ]
                                            ]
                                        ]
                                    ],
                                    ["LOG", "└── ", "$THIS.controller", " removed {{$NUM_HOBBITS}} attack to Merry."],
                                    ["DECREASE_VAL", "/cardById/$THIS_ID/tokens/attack", "$NUM_HOBBITS"]
                                ]
                            ]
                        ]
                    }
                }
            },
            "1c149f93-9e3b-42fa-878c-80b29563a283": {
                "_comment": "Ethir Swordsman",
                "rules": {
                    "ethirSwordsmanEnterPlayTokens": {
                        "_comment": "Add tokens to allies that enter play if this ally is in play.",
                        "type": "trigger",
                        "listenTo": ["/cardById/*/inPlay"],
                        "condition": ["AND", "$THIS.inPlay", ["EQUAL", "$THIS.currentSide", "A"], "$TARGET.inPlay", ["PREV", ["NOT", "$TARGET.inPlay"]], ["IN_STRING", "$TARGET.currentFace.traits", "Outlands."], ["NOT_EQUAL", "$THIS_ID", "$TARGET_ID"]],
                        "then": [
                            ["LOG", "└── ", "$TARGET.controller", " added 1 willpower to ", "$TARGET.currentFace.name", "."],
                            ["INCREASE_VAL", "/cardById/$TARGET_ID/tokens/willpower", 1]
                        ]
                    },
                    "ethirSwordsmanPassiveTokens": {
                        "_comment": "Add/remove tokens depending on whether this is in play.",
                        "type": "passive", 
                        "listenTo": ["/cardById/$THIS_ID/inPlay", "/cardById/$THIS_ID/currentSide"],
                        "condition": [
                            "AND", 
                                "$THIS.inPlay",
                                ["EQUAL", "$THIS.currentSide", "A"]
                        ],
                        "onDo": [
                            ["LOG", "└── ", "$THIS.controller", " added 1 willpower to each Outlands character in play."],
                            ["FOR_EACH_KEY_VAL", "$CARD_ID", "$CARD", "$GAME.cardById", [
                            ["COND",
                                ["AND", "$CARD.inPlay", ["IN_STRING", "$CARD.currentFace.traits", "Outlands."]],
                                [
                                    ["INCREASE_VAL", "/cardById/$CARD_ID/tokens/willpower", 1]
                                ]
                            ]]]
                        ],
                        "offDo": [
                            ["LOG", "└── ", "$THIS.controller", " removed 1 willpower from each Outlands character in play."],
                            ["FOR_EACH_KEY_VAL", "$CARD_ID", "$CARD", "$GAME.cardById", [
                            ["COND",
                                ["AND", "$CARD.inPlay", ["OR", ["IN_STRING", "$CARD.currentFace.traits", "Outlands."], ["EQUAL", "$CARD_ID", "$THIS_ID"]]],
                                [
                                    ["DECREASE_VAL", "/cardById/$CARD_ID/tokens/willpower", 1]
                                ]
                            ]]]
                        ]
                    }
                }
            },
            "2e84d805-365c-47ea-9c4f-e3f75daeb9a6": {
                "_comment": "Warrior of Lossarnach",
                "rules": {
                    "warriorOfLossarnachEnterPlayTokens": {
                        "_comment": "Add tokens to allies that enter play if this ally is in play.",
                        "type": "trigger",
                        "listenTo": ["/cardById/*/inPlay"],
                        "condition": ["AND", "$THIS.inPlay", ["EQUAL", "$THIS.currentSide", "A"], "$TARGET.inPlay", ["PREV", ["NOT", "$TARGET.inPlay"]], ["IN_STRING", "$TARGET.currentFace.traits", "Outlands."], ["NOT_EQUAL", "$THIS_ID", "$TARGET_ID"]],
                        "then": [
                            ["LOG", "└── ", "$TARGET.controller", " added 1 defense to ", "$TARGET.currentFace.name", "."],
                            ["INCREASE_VAL", "/cardById/$TARGET_ID/tokens/defense", 1]
                        ]
                    },
                    "warriorOfLossarnachPassiveTokens": { 
                        "_comment": "Add/remove tokens depending on whether this is in play.",
                        "type": "passive", 
                        "listenTo": ["/cardById/$THIS_ID/inPlay", "/cardById/$THIS_ID/currentSide"],
                        "condition": [
                            "AND", 
                                "$THIS.inPlay",
                                ["EQUAL", "$THIS.currentSide", "A"]
                        ],
                        "onDo": [
                            ["LOG", "└── ", "$THIS.controller", " added 1 defense to each Outlands character in play."],
                            ["FOR_EACH_KEY_VAL", "$CARD_ID", "$CARD", "$GAME.cardById", [
                            ["COND",
                                ["AND", "$CARD.inPlay", ["IN_STRING", "$CARD.currentFace.traits", "Outlands."]],
                                [
                                    ["INCREASE_VAL", "/cardById/$CARD_ID/tokens/defense", 1]
                                ]
                            ]]]
                        ],
                        "offDo": [
                            ["LOG", "└── ", "$THIS.controller", " removed 1 defense from each Outlands character in play."],
                            ["FOR_EACH_KEY_VAL", "$CARD_ID", "$CARD", "$GAME.cardById", [
                            ["COND",
                                ["AND", "$CARD.inPlay", ["OR", ["IN_STRING", "$CARD.currentFace.traits", "Outlands."], ["EQUAL", "$CARD_ID", "$THIS_ID"]]],
                                [
                                    ["DECREASE_VAL", "/cardById/$CARD_ID/tokens/defense", 1]
                                ]
                            ]]]
                        ]
                    }
                }
            },
            "c00844d6-1c3c-4e8c-a46c-8de15b8408df": {
                "_comment": "Knights of the Swan",
                "rules": {
                    "knightsOfTheSwanEnterPlayTokens": {
                        "_comment": "Add tokens to allies that enter play if this ally is in play.",
                        "type": "trigger",
                        "listenTo": ["/cardById/*/inPlay"],
                        "condition": ["AND", "$THIS.inPlay", ["EQUAL", "$THIS.currentSide", "A"], "$TARGET.inPlay", ["PREV", ["NOT", "$TARGET.inPlay"]], ["IN_STRING", "$TARGET.currentFace.traits", "Outlands."], ["NOT_EQUAL", "$THIS_ID", "$TARGET_ID"]],
                        "then": [
                            ["LOG", "└── ", "$TARGET.controller", " added 1 attack to ", "$TARGET.currentFace.name", "."],
                            ["INCREASE_VAL", "/cardById/$TARGET_ID/tokens/attack", 1]
                        ]
                    },
                    "knightsOfTheSwanPassiveTokens": {
                        "_comment": "Add/remove tokens depending on whether this is in play.",
                        "type": "passive", 
                        "listenTo": ["/cardById/$THIS_ID/inPlay", "/cardById/$THIS_ID/currentSide"],
                        "condition": [
                            "AND", 
                                "$THIS.inPlay",
                                ["EQUAL", "$THIS.currentSide", "A"]
                        ],
                        "onDo": [
                            ["LOG", "└── ", "$THIS.controller", " added 1 attack to each Outlands character in play."],
                            ["FOR_EACH_KEY_VAL", "$CARD_ID", "$CARD", "$GAME.cardById", [
                            ["COND",
                                ["AND", "$CARD.inPlay", ["IN_STRING", "$CARD.currentFace.traits", "Outlands."]],
                                [
                                    ["INCREASE_VAL", "/cardById/$CARD_ID/tokens/attack", 1]
                                ]
                            ]]]
                        ],
                        "offDo": [["FOR_EACH_KEY_VAL", "$CARD_ID", "$CARD", "$GAME.cardById", [
                            ["COND",
                                ["AND", "$CARD.inPlay", ["OR", ["IN_STRING", "$CARD.currentFace.traits", "Outlands."], ["EQUAL", "$CARD_ID", "$THIS_ID"]]],
                                [
                                    ["DECREASE_VAL", "/cardById/$CARD_ID/tokens/attack", 1]
                                ]
                            ]]],
                            ["LOG", "└── ", "$THIS.controller", " removed 1 attack from each Outlands character in play."]
                        ]
                    }
                }
            },
            "4cb4741d-c9d8-4d62-ab4f-50fa80c59fbb": {
                "_comment": "Anfalas Herdsman",
                "rules": {
                    "anfalasHerdsmanEnterPlayTokens": {
                        "_comment": "Add tokens to allies that enter play if this ally is in play.",
                        "type": "trigger",
                        "listenTo": ["/cardById/*/inPlay"],
                        "condition": ["AND", "$THIS.inPlay", ["EQUAL", "$THIS.currentSide", "A"], "$TARGET.inPlay", ["PREV", ["NOT", "$TARGET.inPlay"]], ["IN_STRING", "$TARGET.currentFace.traits", "Outlands."], ["NOT_EQUAL", "$THIS_ID", "$TARGET_ID"]],
                        "then": [
                            ["INCREASE_VAL", "/cardById/$TARGET_ID/tokens/hitPoints", 1],
                            ["LOG", "└── ", "$TARGET.controller", " added 1 hit point to ", "$TARGET.currentFace.name", "."]
                        ]
                    },
                    "anfalasHerdsmanPassiveTokens": {
                        "_comment": "Add/remove tokens depending on whether this is in play.",
                        "type": "passive", 
                        "listenTo": ["/cardById/$THIS_ID/inPlay", "/cardById/$THIS_ID/currentSide"],
                        "condition": [
                            "AND", 
                                "$THIS.inPlay",
                                ["EQUAL", "$THIS.currentSide", "A"]
                        ],
                        "onDo": [
                            ["LOG", "└── ", "$THIS.controller", " added 1 hit point to each Outlands character in play."],
                            ["FOR_EACH_KEY_VAL", "$CARD_ID", "$CARD", "$GAME.cardById", [
                            ["COND",
                                ["AND", "$CARD.inPlay", ["IN_STRING", "$CARD.currentFace.traits", "Outlands."]],
                                [
                                    ["INCREASE_VAL", "/cardById/$CARD_ID/tokens/hitPoints", 1]
                                ]
                            ]]]
                        ],
                        "offDo": [
                            ["LOG", "└── ", "$THIS.controller", " removed 1 hit point from each Outlands character in play."],
                            ["FOR_EACH_KEY_VAL", "$CARD_ID", "$CARD", "$GAME.cardById", [
                            ["COND",
                                ["AND", "$CARD.inPlay", ["OR", ["IN_STRING", "$CARD.currentFace.traits", "Outlands."], ["EQUAL", "$CARD_ID", "$THIS_ID"]]],
                                [
                                    ["DECREASE_VAL", "/cardById/$CARD_ID/tokens/hitPoints", 1]
                                ]
                            ]]]
                        ]
                    }
                }
            },
            "1f7fc118-94a7-48a0-bd0c-9c15a36ddc23": {
                "_comment": "Bill the Pony",
                "rules": {
                    "billEnterPlayTokens": {
                        "_comment": "Add tokens to allies that enter play if this ally is in play.",
                        "type": "trigger",
                        "listenTo": ["/cardById/*/inPlay"],
                        "condition": ["AND", "$THIS.inPlay", ["EQUAL", "$THIS.currentSide", "A"], "$TARGET.inPlay", ["PREV", ["NOT", "$TARGET.inPlay"]], ["IN_STRING", "$TARGET.currentFace.traits", "Hobbit."], ["NOT_EQUAL", "$THIS_ID", "$TARGET_ID"]],
                        "then": [
                            ["LOG", "└── ", "$TARGET.controller", " added 1 hit point to ", "$TARGET.currentFace.name", "."],
                            ["INCREASE_VAL", "/cardById/$TARGET_ID/tokens/hitPoints", 1]
                        ]
                    },
                    "billPassiveTokens": {
                        "_comment": "Add/remove tokens depending on whether this is in play.",
                        "type": "passive", 
                        "listenTo": ["/cardById/$THIS_ID/inPlay", "/cardById/$THIS_ID/currentSide"],
                        "condition": [
                            "AND", 
                                "$THIS.inPlay",
                                ["EQUAL", "$THIS.currentSide", "A"]
                        ],
                        "onDo": [
                            ["LOG", "└── ", "$THIS.controller", " added 1 hit point to each Hobbit character in play."],
                            ["FOR_EACH_KEY_VAL", "$CARD_ID", "$CARD", "$GAME.cardById", [
                            ["COND",
                                ["AND", "$CARD.inPlay", ["IN_STRING", "$CARD.currentFace.traits", "Hobbit."]],
                                [
                                    ["INCREASE_VAL", "/cardById/$CARD_ID/tokens/hitPoints", 1]
                                ]
                            ]]]
                        ],
                        "offDo": [
                            ["LOG", "└── ", "$THIS.controller", " removed 1 hit point from each Hobbit character in play."],
                            ["FOR_EACH_KEY_VAL", "$CARD_ID", "$CARD", "$GAME.cardById", [
                            ["COND",
                                ["AND", "$CARD.inPlay", ["OR", ["IN_STRING", "$CARD.currentFace.traits", "Hobbit."], ["EQUAL", "$CARD_ID", "$THIS_ID"]]],
                                [
                                    ["DECREASE_VAL", "/cardById/$CARD_ID/tokens/hitPoints", 1]
                                ]
                            ]]]
                        ]
                    }
                }
            },
            "d1a3a535-7679-4757-871c-80c50c003cff": {
                "_comment": "Escape From Mount Gram",
                "rules": {
                    "escapeFromMountGramSetup": {
                        "type": "entersPlay",
                        "side": "A",
                        "then": ["PROMPT", "player1", "mountGramSetup"]
                    }
                }
            },
            "fb7d55c5-7198-45c5-97d7-be4c6a26fa68": {
                "_comment": "Temple of the Deceived",
                "rules": {
                    "templeOfTheDeceivedSetup": {
                        "type": "entersPlay",
                        "side": "A",
                        "then": [
                            ["PROMPT", "$PLAYER_ORDER", "mapHotkeyReminder"],
                            ["UPDATE_LAYOUT", "/layout/regions/sharedMap/visible", true],
                            [
                                ["VAR", "$TEMPLE_REGION_X", ["LIST", 5, 5, 5]],
                                ["VAR", "$TEMPLE_REGION_Y", ["LIST", 1, 2, 3]],
                                ["VAR", "$TEMPLE_INDEX", 0],
                                ["FOR_EACH_VAL", "$CARD", "$GAME.groupById.sharedEncounterDeck2.parentCards", [
                                    ["COND",
                                        ["AND", ["EQUAL", "$CARD.sides.B.name", "Temple of the Deceived"], ["EQUAL", "$CARD.sides.B.type", "Location"]],
                                        [
                                            ["MOVE_CARD", "$CARD.id", "sharedMap", 0, 0, {"allowFlip": false}],
                                            ["VAR", "$LEFT", ["CALC", "{{$TEMPLE_REGION_X.[$TEMPLE_INDEX]}}*15"]],
                                            ["VAR", "$TOP",  ["CALC", "({{$TEMPLE_REGION_Y.[$TEMPLE_INDEX]}}-0.7)*25"]],
                                            ["VAR", "$STACK_ID", "$GAME.cardById.{{$CARD.id}}.stackId"],
                                            ["SET", "/stackById/$STACK_ID/left", "{{$LEFT}}%"],
                                            ["SET", "/stackById/$STACK_ID/top", "{{$TOP}}%"],
                                            ["INCREASE_VAR", "$TEMPLE_INDEX", 1]
                                        ]
                                    ]
                                ]],
                                ["VAR", "$NORMAL_REGION_Y", ["LIST", 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3]],
                                ["VAR", "$NORMAL_REGION_X", ["LIST", 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4]],
                                ["VAR", "$NORMAL_INDEX", 0],
                                ["FOR_EACH_VAL", "$CARD", "$GAME.groupById.sharedEncounterDeck2.parentCards", [
                                    ["COND",
                                        ["AND", ["EQUAL", "$CARD.sides.B.name", "Lost Island"], ["EQUAL", "$CARD.sides.B.type", "Location"]],
                                        [
                                            ["MOVE_CARD", "$CARD.id", "sharedMap", 0, 0, {"allowFlip": false}],
                                            ["VAR", "$LEFT", ["CALC", "{{$NORMAL_REGION_X.[$NORMAL_INDEX]}}*15"]],
                                            ["VAR", "$TOP",  ["CALC", "({{$NORMAL_REGION_Y.[$NORMAL_INDEX]}}-0.7)*25"]],
                                            ["VAR", "$STACK_ID", "$GAME.cardById.{{$CARD.id}}.stackId"],
                                            ["SET", "/stackById/$STACK_ID/left", "{{$LEFT}}%"],
                                            ["SET", "/stackById/$STACK_ID/top", "{{$TOP}}%"],
                                            ["COND", ["EQUAL", "$NORMAL_INDEX", 0], ["SET", "/cardById/{{$CARD.id}}/currentSide", "A"]],
                                            ["COND", ["EQUAL", "$NORMAL_INDEX", 8], ["SET", "/cardById/{{$CARD.id}}/currentSide", "A"]],
                                            ["INCREASE_VAR", "$NORMAL_INDEX", 1]
                                        ]
                                    ]
                                ]]
                            ]
                        ]
                    }
                }
            },
            "0e0b125c-ffed-4473-9a64-7d709b16cca5": {
                "_comment": "To Catch an Orc",
                "rules": {
                    "toCatchAnOrcSetup": {
                        "type": "entersPlay",
                        "side": "A",
                        "then": ["PROMPT", "player1", "toCatchAnOrcSetup"]
                    }
                }
            },
            "b56f7d39-ca8d-4979-baa6-8a2f875d6463": {
                "_comment": "The Fortress of Nurn",
                "rules": {
                    "theFortressOfNurnSetup": {
                        "type": "entersPlay",
                        "side": "A",
                        "then": ["PROMPT", "player1", "fortressOfNurnSetup"]
                    }
                }
            },
            "51223bd0-ffd1-11df-a976-0801212c9034": {
                "_comment": "Foundations of Stone",
                "rules": {
                    "stage3B": {
                        "type": "entersPlay",
                        "side": "B",
                        "then": ["PROMPT", "player1", "foundationsOfStone3B"]
                    }
                }
            },
            "03a074ce-d581-4672-b6ea-ed97b7afd415": {
                "_comment": "The Glittering Caves",
                "rules": {
                    "theGlitteringCavesSetup": {
                        "type": "entersPlay",
                        "side": "A",
                        "then": [
                            ["UPDATE_LAYOUT", "/layout/regions/sharedMap/visible", true],
                            ["VAR", "$X", ["LIST", 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4]],
                            ["VAR", "$Y", ["LIST", 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3]],
                            ["VAR", "$INDEX", 0],
                            ["FOR_EACH_VAL", "$STACK_ID", "$GAME.groupById.sharedEncounterDeck3.stackIds", [
                                ["MOVE_STACK", "$STACK_ID", "sharedMap", 0],
                                ["VAR", "$LEFT", ["CALC", "{{$X.[$INDEX]}}*15"]],
                                ["VAR", "$TOP", ["CALC", "{{$Y.[$INDEX]}}*20"]],
                                ["SET", "/stackById/$STACK_ID/left", "{{$LEFT}}%"],
                                ["SET", "/stackById/$STACK_ID/top", "{{$TOP}}%"],
                                ["INCREASE_VAR", "$INDEX", 1]
                            ]],
                            ["PROMPT", "$PLAYER_ORDER", "mapHotkeyReminder"],
                            ["PROMPT", "player1", "glitteringSetup"]
                        ]
                    }
                }
            },
            "2b28d8ba-23b9-4f48-9808-3bbe2ed0a8fc": {
                "_comment": "Dwarf Pipe",
                "ability": {
                    "A": ["COND",
                        ["AND", 
                            ["GREATER_THAN", "$THIS.cardIndex", 0],
                            ["NOT", "$THIS.exhausted"],
                            ["GREATER_THAN", ["LENGTH", "$GAME.groupById.{{$THIS.controller}}Discard.stackIds"], 0]
                        ],
                        [
                            ["VAR", "$ALIAS", ["GET_ALIAS", "$THIS.controller"]],
                            ["VAR", "$TOP_CARD_ID", ["GET_CARD_ID", "{{$THIS.controller}}Discard", 0, 0]],
                            ["LOG", "└── ", "Dwarf pipe moved ", "$GAME.cardById.{{$TOP_CARD_ID}}.currentFace.name"," from {{$ALIAS}}'s discard to bottom of deck."],
                            ["MOVE_CARD", "$TOP_CARD_ID", "{{$THIS.controller}}Deck", -1],
                            ["TOGGLE_EXHAUST", "$THIS"]
                        ],
                        ["TRUE"],
                        ["LOG", "└── ", "The ability's conditions are not met."]
                    ]
                }
            },
            "86e1977f-0a24-46c8-a7ee-d5d78410f1a3": {
                "_comment": "Dwarf Pipe",
                "inheritFrom": "2b28d8ba-23b9-4f48-9808-3bbe2ed0a8fc"
            },
            "41b56fc4-6ecd-4c9a-80d4-3074c267e823": {
                "_comment": "Silver Harp",
                "ability": {
                    "A": ["COND",
                        ["AND", 
                            ["GREATER_THAN", "$THIS.cardIndex", 0],
                            ["NOT", "$THIS.exhausted"],
                            ["GREATER_THAN", ["LENGTH", "$GAME.groupById.{{$PLAYER_N}}Discard.stackIds"], 0]
                        ],
                        [
                            ["LOG", "└── ", "Returned top card of discard pile to hand."],
                            ["TOGGLE_EXHAUST", "$THIS"],
                            ["VAR", "$TOP_CARD_ID", ["GET_CARD_ID", "{{$PLAYER_N}}Discard", 0, 0]],
                            ["MOVE_CARD", "$TOP_CARD_ID", "{{$PLAYER_N}}Hand", -1]
                        ],
                        ["TRUE"],
                        ["LOG", "└── ", "The ability's conditions are not met."]
                    ]
                }
            },
            "51223bd0-ffd1-11df-a976-0801213c9027": {
                "_comment": "Vilya",
                "ability": {
                    "A": ["COND",
                        ["AND", 
                            ["GREATER_THAN", "$THIS.cardIndex", 0],
                            ["NOT", "$THIS.exhausted"],
                            ["NOT", "$GAME.cardById.{{$THIS.parentCardId}}.exhausted"],
                            ["GREATER_THAN", ["LENGTH", "$GAME.groupById.{{$THIS.controller}}Deck.stackIds"], 0]
                        ],
                        [
                            ["VAR", "$ALIAS", ["GET_ALIAS", "$THIS.controller"]],
                            ["VAR", "$TOP_CARD_ID", ["GET_CARD_ID", "{{$THIS.controller}}Deck", 0, 0]],
                            ["MOVE_CARD", "$TOP_CARD_ID", "{{$THIS.controller}}Play1", -1],
                            ["LOG", "└── ", "Vilya moved ", "$GAME.cardById.{{$TOP_CARD_ID}}.currentFace.name"," from {{$ALIAS}}'s deck into play area."],
                            ["TOGGLE_EXHAUST", "$THIS"],
                            ["TOGGLE_EXHAUST", "$GAME.cardById.{{$THIS.parentCardId}}"]
                        ],
                        ["TRUE"],
                        ["LOG", "└── ", "The ability's conditions are not met."]
                    ]
                }
            },
            "65608b5c-4420-4d76-a458-71a8b32e4159": {
                "_comment": "Vilya",
                "inheritFrom": "51223bd0-ffd1-11df-a976-0801213c9027"
            },
            "b9e3d591-5973-4f35-90b8-d74d0aeabcc7": {
                "_comment": "Legacy of Numenor",
                "ability": {
                    "A": [
                        ["LOG", "└── ", "Raised each player's threat by 4."],
                        ["LOG", "└── ", "Added a resource to each hero's resource pool."],
                        ["FOR_EACH_VAL", "$PLAYER_I", "$PLAYER_ORDER", [
                            ["INCREASE_VAL", "/playerData/$PLAYER_I/threat", 4]
                        ]],
                        ["FOR_EACH_KEY_VAL", "$CARD_ID", "$CARD", "$CARD_BY_ID", [
                            ["COND",
                                ["AND",
                                    ["EQUAL", "$CARD.inPlay", true],
                                    ["EQUAL", "$CARD.currentFace.type", "Hero"]
                                ],
                                [
                                    ["INCREASE_VAL", "/cardById/$CARD_ID/tokens/resource", 1]
                                ]
                            ]
                        ]],
                        ["ACTION_LIST", "discardCard"]
                    ]
                }
            },
            "79cb32f4-053c-47e1-983d-59d64b493a76": {
                "_comment": "Waters of Nimrodel",
                "ability": {
                    "A": [
                        ["LOG", "└── ", "Raised each player's threat by 3."],
                        ["LOG", "└── ", "Healing all damage on each character in play."],
                        ["FOR_EACH_VAL", "$PLAYER_I", "$PLAYER_ORDER", [
                            ["INCREASE_VAL", "/playerData/$PLAYER_I/threat", 3]
                        ]],
                        ["FOR_EACH_KEY_VAL", "$CARD_ID", "$CARD", "$CARD_BY_ID", [
                            ["COND",
                                ["AND",
                                    ["EQUAL", "$CARD.inPlay", true],
                                    ["OR", ["EQUAL", "$CARD.currentFace.type", "Hero"], ["EQUAL", "$CARD.currentFace.type", "Ally"]]
                                ],
                                [
                                    ["SET", "/cardById/$CARD_ID/tokens/damage", 0]
                                ]
                            ]
                        ]],
                        ["ACTION_LIST", "discardCard"]
                    ]
                }
            },
            "cfba1adb-5d73-4d46-b10b-b3af003f0e90": {
                "_comment": "Deep Knowledge",
                "ability": {
                    "A": [
                        ["LOG", "└── ", "Raise each player's threat by 2."],
                        ["LOG", "└── ", "Each player draws 2 cards."],
                        ["FOR_EACH_VAL", "$PLAYER_I", "$PLAYER_ORDER", [
                            ["INCREASE_VAL", "/playerData/$PLAYER_I/threat", 2],
                            ["DRAW_CARD", 2, "$PLAYER_I"]
                        ]],
                        ["ACTION_LIST", "discardCard"]
                    ]
                }
            },
            "51223bd0-ffd1-11df-a976-0801201c9003": {
                "_comment": "Campfire Tales",
                "ability": {
                    "A": [
                        ["LOG", "└── ", "Each player draws a card."],
                        ["FOR_EACH_VAL", "$PLAYER_I", "$PLAYER_ORDER", [
                            ["DRAW_CARD", 1, "$PLAYER_I"]
                        ]],
                        ["ACTION_LIST", "discardCard"]
                    ]
                }
            },
            "8d6a15a8-e363-46bb-8e49-0af45a1ea0d1": {
                "_comment": "Galadriel",
                "ability": {
                    "A": ["COND",
                        ["AND", 
                            ["NOT", "$THIS.exhausted"]
                        ],
                        [
                            ["TOGGLE_EXHAUST", "$THIS"],
                            ["COND",
                                ["GREATER_THAN", "$GAME.numPlayers", 1],
                                [
                                    ["PROMPT", "$PLAYER_N", "executeForTargetPlayer"],
                                    ["VAR", "$I", 1],
                                    ["WHILE",
                                        ["LESS_EQUAL", "$I", "$GAME.numPlayers"],
                                        [
                                            ["PROMPT_ADD_OPTION", "$PLAYER_N", ["GET_ALIAS", "player{{$I}}"], ["LABEL", "$I"], ["LIST",
                                                ["LIST", "LOG", "└── ", ["GET_ALIAS", "player{{$I}}"], " reduces threat by 1 and draws a card."],
                                                ["LIST", "DRAW_CARD", 1, "player{{$I}}"],
                                                ["DECREASE_VAL", "/playerData/player{{$I}}/threat", 1]
                                            ]],
                                            ["UPDATE_VAR", "$I", ["ADD", "$I", 1]]    
                                        ]
                                    ]
                                ],
                                ["TRUE"],
                                [
                                    ["LOG", "└── ", ["GET_ALIAS", "player1"], " reduces threat by 1 and draws a card"],
                                    ["DRAW_CARD", 1],
                                    ["DECREASE_VAL", "/playerData/player1}/threat", 1]
                                ]
                            ]
                        ],
                        ["TRUE"],
                        ["LOG", "└── ", "The ability's conditions are not met."]
                    ]
                }
            },
            "8ccfbcf2-676c-4e24-ab5e-fa479343ab39": {"_comment": "Galadriel", "inheritFrom": "8d6a15a8-e363-46bb-8e49-0af45a1ea0d1"},
            "51223bd0-ffd1-11df-a976-0801200c9012": {
                "_comment": "Beravor",
                "ability": {
                    "A": ["COND",
                        ["AND", 
                            ["NOT", "$THIS.exhausted"]
                        ],
                        [
                            ["TOGGLE_EXHAUST", "$THIS"],
                            ["COND",
                                ["GREATER_THAN", "$GAME.numPlayers", 1],
                                [
                                    ["PROMPT", "$PLAYER_N", "executeForTargetPlayer"],
                                    ["VAR", "$I", 1],
                                    ["WHILE",
                                        ["LESS_EQUAL", "$I", "$GAME.numPlayers"],
                                        [
                                            ["PROMPT_ADD_OPTION", "$PLAYER_N", ["GET_ALIAS", "player{{$I}}"], ["LABEL", "$I"], ["POINTER", [
                                                ["LOG", "└── ", ["GET_ALIAS", "player{{$I}}"], " draws 2 cards."],
                                                ["DRAW_CARD", 2, "player{{$I}}"]
                                            ]]],
                                            ["UPDATE_VAR", "$I", ["ADD", "$I", 1]]    
                                        ]
                                    ]
                                ],
                                ["TRUE"],
                                [
                                    ["LOG", "└── ", ["GET_ALIAS", "player1"], " draws 2 cards"],
                                    ["DRAW_CARD", 2]
                                ]
                            ]
                        ],
                        ["TRUE"],
                        ["LOG", "└── ", "The ability's conditions are not met."]
                    ]
                }
            },
            "51223bd0-ffd1-11df-a976-0801200c9062": {
                "_comment": "Gleowine",
                "ability": {
                    "A": ["COND",
                        ["AND", 
                            ["NOT", "$THIS.exhausted"]
                        ],
                        [
                            ["TOGGLE_EXHAUST", "$THIS"],
                            ["COND",
                                ["GREATER_THAN", "$GAME.numPlayers", 1],
                                [
                                    ["PROMPT", "$PLAYER_N", "executeForTargetPlayer"],
                                    ["VAR", "$I", 1],
                                    ["WHILE",
                                        ["LESS_EQUAL", "$I", "$GAME.numPlayers"],
                                        [
                                            ["PROMPT_ADD_OPTION", "$PLAYER_N", ["GET_ALIAS", "player{{$I}}"], ["LABEL", "$I"], ["LIST",
                                                ["LIST", "LOG", "└── ", ["GET_ALIAS", "player{{$I}}"], " draws a card."],
                                                ["LIST", "DRAW_CARD", 1, "player{{$I}}"]
                                            ]],
                                            ["UPDATE_VAR", "$I", ["ADD", "$I", 1]]    
                                        ]
                                    ]
                                ],
                                ["TRUE"],
                                [
                                    ["LOG", "└── ", ["GET_ALIAS", "player1"], " draws a card."],
                                    ["DRAW_CARD", 1]
                                ]
                            ]
                        ],
                        ["TRUE"],
                        ["LOG", "└── ", "The ability's conditions are not met."]
                    ]
                }
            },
            "51223bd0-ffd1-11df-a976-0801200c9046": {
                "_comment": "The Galadhrim's Greeting",
                "ability": {
                    "A": [["COND",
                            ["GREATER_THAN", "$GAME.numPlayers", 1],
                            [
                                ["PROMPT", "$PLAYER_N", "basePrompt", "Choose an option"],
                                ["PROMPT_ADD_OPTION", "$PLAYER_N", "Reduce each player's threat by 2", "E", ["POINTER", [
                                    ["LOG", "└── ", "Reduced each player's threat by 2."],
                                    ["FOR_EACH_VAL", "$PLAYER_I", "$PLAYER_ORDER",
                                        ["DECREASE_VAL", "/playerData/$PLAYER_I/threat", 2]
                                    ]
                                ]]],
                                ["VAR", "$I", 1],
                                ["WHILE",
                                    ["LESS_EQUAL", "$I", "$GAME.numPlayers"],
                                    [
                                        ["PROMPT_ADD_OPTION", "$PLAYER_N", ["FORMAT", "Reduce {0}'s threat by 6","player{{$I}}"], ["LABEL", "$I"], ["REPLACE_STRING_IN_LIST", ["POINTER", [
                                            ["LOG", "└── ", ["GET_ALIAS", "PLAYER_ID"], " Reduced their threat by 6."],
                                            ["DECREASE_VAL", "/playerData/PLAYER_ID/threat", 6]
                                        ]], "PLAYER_ID", "player{{$I}}"
                                        ]],
                                        ["UPDATE_VAR", "$I", ["ADD", "$I", 1]]    
                                    ]
                                ]
                            ],
                            ["TRUE"],
                            [
                                ["LOG", "└── ", ["GET_ALIAS", "player1"], " reduced their threat by 6."],
                                ["DECREASE_VAL", "/playerData/$PLAYER_N/threat", 6]
                            ]
                        ],
                        ["ACTION_LIST", "discardCard"]
                    ]
                }
            },
            "51223bd0-ffd1-11df-a976-0801200c9014": {
                "_comment": "Faramir",
                "ability": {
                    "A": ["COND",
                        ["AND", 
                            ["NOT", "$THIS.exhausted"]
                        ],
                        [
                            ["TOGGLE_EXHAUST", "$THIS"],
                            ["COND",
                                ["GREATER_THAN", "$GAME.numPlayers", 1],
                                [
                                    ["PROMPT", "$PLAYER_N", "executeForTargetPlayer"],
                                    ["VAR", "$I", 1],
                                    ["WHILE",
                                        ["LESS_EQUAL", "$I", "$GAME.numPlayers"],
                                        [
                                            ["PROMPT_ADD_OPTION", "$PLAYER_N", ["GET_ALIAS", "player{{$I}}"], ["LABEL", "$I"], ["REPLACE_STRING_IN_LIST", ["POINTER", [
                                                ["LOG", "└── ", "Added 1 willpower to each character controlled by ", ["GET_ALIAS", "PLAYER_ID"], "."],
                                                ["FOR_EACH_KEY_VAL", "$CARD_ID", "$CARD", "$GAME.cardById", [
                                                    ["COND",
                                                        ["AND", "$CARD.inPlay", ["EQUAL", "$CARD.controller", "PLAYER_ID"]],
                                                        [
                                                            ["INCREASE_VAL", "/cardById/$CARD_ID/tokens/willpower", 1],
                                                            ["INCREASE_VAL", "/cardById/$CARD_ID/faramirTokens", 1]
                                                        ]
                                                    ]
                                                ]]
                                            ]], "PLAYER_ID", "player{{$I}}"
                                            ]],
                                            ["UPDATE_VAR", "$I", ["ADD", "$I", 1]]    
                                        ]
                                    ]
                                ],
                                ["TRUE"],
                                [
                                    ["LOG", "└── ", "Added 1 willpower to each character."],
                                    ["FOR_EACH_KEY_VAL", "$CARD_ID", "$CARD", "$GAME.cardById", [
                                        ["COND",
                                            ["AND", "$CARD.inPlay", ["EQUAL", "$CARD.controller", "player1"]],
                                            [
                                                ["INCREASE_VAL", "/cardById/$CARD_ID/tokens/willpower", 1],
                                                ["INCREASE_VAL", "/cardById/$CARD_ID/faramirTokens", 1]
                                            ]
                                    ]]]
                                ]
                            ]
                        ],
                        ["TRUE"],
                        ["LOG", "└── ", "The ability's conditions are not met."]
                    ]
                },
                "rules": {
                    "faramirPhaseEndTokens": {
                        "type": "trigger",
                        "listenTo": ["/stepId"],
                        "condition": ["OR",
                            ["EQUAL", "$GAME.stepId", "1.1"],
                            ["EQUAL", "$GAME.stepId", "2.1"],
                            ["EQUAL", "$GAME.stepId", "3.1"],
                            ["EQUAL", "$GAME.stepId", "4.1"],
                            ["EQUAL", "$GAME.stepId", "5.1"],
                            ["EQUAL", "$GAME.stepId", "6.1"],
                            ["EQUAL", "$GAME.stepId", "7.1"]
                        ],
                        "then": ["FOR_EACH_KEY_VAL", "$CARD_ID", "$CARD", "$GAME.cardById", [
                            ["COND",
                                ["AND", "$CARD.inPlay", ["GREATER_THAN", "$CARD.faramirTokens", 0]],
                                [
                                    ["LOG", "└── ", "Removed ", "$CARD.faramirTokens", " willpower from ", "$CARD.currentFace.name", "."],
                                    ["DECREASE_VAL", "/cardById/$CARD_ID/tokens/willpower", "$CARD.faramirTokens"]
                                ]
                            ],
                            ["SET", "/cardById/$CARD_ID/faramirTokens", 0]
                        ]]
                    }
                }
            },
            "05419721-91bd-4851-ac95-cdc079a2c036": {"_comment": "Faramir", "inheritFrom": "51223bd0-ffd1-11df-a976-0801200c9014"},
            "47253ed8-2376-495a-a9b2-8f829c66e3bf": {"_comment": "Faramir", "inheritFrom": "51223bd0-ffd1-11df-a976-0801200c9014"},
            "51223bd0-ffd1-11df-a976-0801212c9019": {
                "_comment": "Imladris Stargazer",
                "ability": {
                    "A": ["EXHAUST_TO_LOOK_AT_X", "$THIS", 5]
                }
            },
            "51223bd0-ffd1-11df-a976-0801213c9015": {
                "_comment": "Master of the Forge",
                "ability": {
                    "A": ["EXHAUST_TO_LOOK_AT_X", "$THIS", 5]
                }
            },
            "6e97a705-2458-4aa1-ad90-f3cd8200ca5a": {
                "_comment": "Mirror of Galadriel",
                "ability": {
                    "A": ["EXHAUST_TO_LOOK_AT_X", "$THIS", 10]
                }
            },
            "a17465f5-e6f5-4699-b0d7-79355286a065": {
                "_comment": "Entmoot",
                "ability": {
                    "A": ["DISCARD_TO_LOOK_AT_X", "$THIS", 5]
                }
            },
            "bd20ff6a-d77f-47d8-81dd-202e5f21cfaf": {
                "_comment": "Timely Aid",
                "ability": {
                    "A": ["DISCARD_TO_LOOK_AT_X", "$THIS", 5]
                }
            },
            "51e0054c-c48d-4fc7-9737-30bf12d4b52a": {
                "_comment": "Horse-breeder",
                "ability": {
                    "A": ["EXHAUST_TO_LOOK_AT_X", "$THIS", 10]
                }
            },
            "0567c2df-677c-4529-985a-54621088fe58": {
                "_comment": "Horse-breeder",
                "inheritFrom": "51e0054c-c48d-4fc7-9737-30bf12d4b52a"
            },
            "51223bd0-ffd1-11df-a976-0801201c9008": {
                "_comment": "The Eagles Are Coming",
                "ability": {
                    "A": ["DISCARD_TO_LOOK_AT_X", "$THIS", 5]
                }
            },
            "8f1cedc5-bca5-4594-bc01-73caae4a5083": {
                "_comment": "Gwaihir's Debt",
                "ability": {
                    "A": ["DISCARD_TO_LOOK_AT_X", "$THIS", 5]
                }
            },
            "51223bd0-ffd1-11df-a976-0801204c9005": {
                "_comment": "Gildor Inglorion (Ally)",
                "ability": {
                    "A": ["EXHAUST_TO_LOOK_AT_X", "$THIS", 3]
                }
            },
            "08d95282-e88d-4a9c-a01b-651d569052ee": {
                "_comment": "Raise the Shire",
                "ability": {
                    "A": ["DISCARD_TO_LOOK_AT_X", "$THIS", 5]
                }
            },
            "9152834a-5355-42ba-9592-1a3c1940d1a8": {
                "_comment": "King under the Mountain",
                "ability": {
                    "A": ["EXHAUST_TO_LOOK_AT_X", "$THIS", 2]
                }
            },
            "2609f225-615b-4dc4-a451-424fdedf685d": {"_comment": "King under the Mountain", "inheritFrom": "9152834a-5355-42ba-9592-1a3c1940d1a8"},
            "51223bd0-ffd1-11df-a976-1801204c9019": {
                "_comment": "Bofur (Tactics)",
                "ability": {
                    "A": ["EXHAUST_TO_LOOK_AT_X", "$THIS", 5]
                }
            },
            "ed2a2959-7070-4f23-bb37-d6a0a19217c9": {
                "_comment": "Odo Proudfoot",
                "ability": {
                    "A": ["LOOK_AT", "$PLAYER_N", "{{$THIS.controller}}Deck", 5, true]
                }
            },
            "1200dd24-3d0a-485d-baa3-6eac91f87779": {
                "_comment": "Messenger of the King",
                "rules": {
                    "makeIntoHero": {
                        "type": "trigger",
                        "autoRun": {
                            "status": "promptYN",
                            "promptPlayerI": "$THIS.controller",
                            "promptMessage": "Grant the hero type to {{$THIS.parentCard.sides.A.name}}?"
                        },
                        "listenTo": ["/cardById/$THIS_ID/cardIndex"],
                        "condition": ["GREATER_THAN", "$THIS.cardIndex", 0],
                        "then": [
                            ["VAR", "$ALIAS", ["GET_ALIAS", "$THIS.controller"]],
                            ["LOG", "{{$ALIAS}} gave the hero type to {{$THIS.parentCard.sides.A.name}}."],
                            ["SET", "/cardById/$THIS.parentCardId/sides/A/type", "Hero"]
                        ]
                    }
                }
            },
            "c266126d-cf2d-4a61-aac7-28bac2d1ea0d": {
                "_comment": "Treebeard",
                "rules": {
                    "treebeardResource": {
                        "type": "trigger",
                        "autoRun": {
                            "status": "prompt",
                            "promptPlayerI": "$THIS.controller",
                            "promptMessage": "Add 1 resource to Treebeard?"
                        },
                        "listenTo": ["/stepId"],
                        "condition": ["AND", 
                            ["EQUAL", "$GAME.stepId", "1.R"], 
                            ["EQUAL", "$THIS.currentSide", "A"],
                            ["EQUAL", "$THIS.inPlay", true]
                        ],
                        "then": [
                            ["VAR", "$ALIAS", ["GET_ALIAS", "$THIS.controller"]],
                            ["LOG", "{{$ALIAS}} added 1 resource to Treebeard."],
                            ["INCREASE_VAL", "/cardById/$THIS_ID/tokens/resource", 1]
                        ]
                    }
                }
            },
            "51223bd0-ffd1-11df-a976-0801210c9012": {
                "_comment": "Resourceful",
                "rules": {
                    "resourcefulResource": {
                        "type": "trigger",
                        "autoRun": {
                            "status": "prompt",
                            "promptPlayerI": "$THIS.controller",
                            "promptMessage": "Add 1 resource to Resourceful's attached hero?"
                        },
                        "listenTo": ["/stepId"],
                        "condition": ["AND", 
                            ["EQUAL", "$GAME.stepId", "1.R"], 
                            ["EQUAL", "$THIS.currentSide", "A"],
                            ["EQUAL", "$THIS.inPlay", true]
                        ],
                        "then": [
                            ["LOG", "{{$ALIAS_N}} added 1 resource to Resourceful's attached hero."],
                            ["INCREASE_VAL", "/cardById/$THIS.parentCardId/tokens/resource", 1]
                        ]
                    }
                }
            },
            "51223bd0-ffd1-11df-a976-0801200c9026": {
                "_comment": "Steward of Gondor",
                "ability": {
                    "A": ["COND",
                        ["AND", 
                            ["GREATER_THAN", "$THIS.cardIndex", 0],
                            ["NOT", "$THIS.exhausted"]
                        ],
                        [
                            ["LOG", "└── ", "Added 2 resources to ", "$GAME.cardById.{{$THIS.parentCardId}}.currentFace.name", "."],
                            ["TOGGLE_EXHAUST", "$THIS"],
                            ["INCREASE_VAL", "/cardById/$THIS.parentCardId/tokens/resource", 2]
                        ],
                        ["TRUE"],
                        ["LOG", "└── ", "The ability's conditions are not met."]
                    ]
                }
            },
            "7ce49caa-c7ac-455e-b35f-217055be34ed": {
                "_comment": "Steward of Gondor",
                "inheritFrom": "51223bd0-ffd1-11df-a976-0801200c9026"
            },
            "aef31639-1962-4d41-912c-bea70e1be83e": {
                "_comment": "Steward of Gondor",
                "inheritFrom": "51223bd0-ffd1-11df-a976-0801200c9026"
            },
            "51223bd0-ffd1-11df-a976-0801200c9045": {
                "_comment": "Northern Tracker",
                "ability": {
                    "A": ["COND",
                        ["AND", 
                            ["NOT", "$THIS.exhausted"],
                            ["NOT", "$THIS.committed"],
                            "$THIS.inPlay"
                        ],
                        [
                            ["LOG", "└── ", "Northern Tracker added 1 progress to each location in the staging area."],
                            ["ACTION_LIST", "toggleCommit"],
                            ["FOR_EACH_KEY_VAL", "$CARD_ID", "$CARD", "$GAME.cardById", [
                                ["COND",
                                    ["AND", ["EQUAL", "$CARD.groupId", "sharedStagingArea"], ["EQUAL", "$CARD.currentFace.type", "Location"]],
                                    ["INCREASE_VAL", "/cardById/$CARD_ID/tokens/progress", 1]
                                ]]
                            ]
                        ],
                        ["TRUE"],
                        ["LOG", "└── ", "The ability's conditions are not met."]
                    ]
                }
            },
            "exhaustToReadyAttachedCharacter": {
                "abstract": true,
                "ability": {
                    "A": ["COND",
                        ["AND", 
                            ["GREATER_THAN", "$THIS.cardIndex", 0],
                            ["NOT", "$THIS.exhausted"],
                            "$GAME.cardById.{{$THIS.parentCardId}}.exhausted"
                        ],
                        [
                            ["LOG", "└── ", "Exhausted ", "$THIS.currentFace.name", " and readied ", "$GAME.cardById.{{$THIS.parentCardId}}.currentFace.name", "."],
                            ["SET", "/cardById/$THIS.id/rotation", 90],
                            ["SET", "/cardById/$THIS.id/exhausted", true],
                            ["SET", "/cardById/$THIS.parentCardId/rotation", 0],
                            ["SET", "/cardById/$THIS.parentCardId/exhausted", false]
                        ],
                        ["TRUE"],
                        ["LOG", "└── ", "The ability's conditions are not met."]
                    ]
                }
            },
            "51223bd0-ffd1-11df-a976-0801200c9057": {
                "_comment": "Unexpected Courage",
                "inheritFrom": "exhaustToReadyAttachedCharacter"
            },
            "e718605c-622d-4fd5-b1a1-b9fe467f09c5": {
                "_comment": "Unexpected Courage",
                "inheritFrom": "51223bd0-ffd1-11df-a976-0801200c9057"
            },
            "51223bd0-ffd1-11df-a976-0801205c9006": {
                "_comment": "Fast Hitch",
                "inheritFrom": "exhaustToReadyAttachedCharacter"
            },
            "6f8508d7-bb11-4d5c-a077-80a35e00105e": {
                "_comment": "Rohan Warhorse",
                "inheritFrom": "exhaustToReadyAttachedCharacter"
            },
            "0dfb0828-62d4-4f53-b6fe-600b524f84e1": {
                "_comment": "Rohan Warhorse",
                "inheritFrom": "6f8508d7-bb11-4d5c-a077-80a35e00105e"
            },
            "83842580-bfe9-4d56-addf-e1d290eb7bcf": {
                "_comment": "Heir of Mardil",
                "inheritFrom": "exhaustToReadyAttachedCharacter"
            },
            "ed245036-ca8c-4ed7-8441-4b2019263bf5": {
                "_comment": "Heir of Mardil",
                "inheritFrom": "83842580-bfe9-4d56-addf-e1d290eb7bcf"
            },
            "e7df2c09-6d38-4f92-9279-eba5f41370cd": {
                "_comment": "Steed of the North",
                "inheritFrom": "exhaustToReadyAttachedCharacter"
            },
            "f347a30b-44d9-4ddd-af69-798e96b68b65": {
                "_comment": "Leather Boots",
                "inheritFrom": "exhaustToReadyAttachedCharacter"
            },
            "17cb8a9a-6369-4ea9-a614-02908bd7b77f": {
                "_comment": "Wingfoot",
                "inheritFrom": "exhaustToReadyAttachedCharacter"
            },
            "c155a832-e771-4f51-8c99-7356babb84b1": {
                "_comment": "Wingfoot",
                "inheritFrom": "17cb8a9a-6369-4ea9-a614-02908bd7b77f"
            },
            "c984e8e8-94a6-4af6-9455-824ad2cf46f9": {
                "_comment": "Magic Ring",
                "ability": {
                    "A": ["COND",
                        ["AND", 
                            ["GREATER_THAN", "$THIS.cardIndex", 0],
                            ["NOT", "$THIS.exhausted"]
                        ],
                        [
                            ["VAR", "$PARENT_CARD", "$GAME.cardById.{{$THIS.parentCardId}}"],
                            ["LOG", "└── ", "Raised threat by 1."],
                            ["COND",
                                ["AND", ["NOT", "$PARENT_CARD.exhausted"], ["EQUAL", "$PARENT_CARD.tokens.damage", 0]],
                                [
                                    ["LOG", "└── ", "Added a resource to ", "$PARENT_CARD.currentFace.name","."],
                                    ["INCREASE_VAL", "/cardById/$THIS.parentCardId/tokens/resource", 1]
                                ],
                                ["TRUE"],
                                [
                                    ["PROMPT", "$PLAYER_N", "basePrompt", "Choose an option"],
                                    ["COND",
                                        ["GREATER_THAN", "$GAME.cardById.{{$PARENT_CARD.id}}.tokens.damage", 0],
                                        ["PROMPT_ADD_OPTION", "$PLAYER_N", "Heal 1 damage", "1", ["REPLACE_STRING_IN_LIST", ["REPLACE_STRING_IN_LIST", ["POINTER", [
                                            ["LOG", "└── ", "Healed 1 damage from PARENT_CARD_NAME."],
                                            ["DECREASE_VAL", "/cardById/{{PARENT_CARD_ID}}/tokens/damage", 1]
                                        ]], "PARENT_CARD_NAME", "$PARENT_CARD.currentFace.name"], "PARENT_CARD_ID", "$PARENT_CARD.id"]
                                        ]
                                    ],
                                    ["PROMPT_ADD_OPTION", "$PLAYER_N", "Add 1 resource", "2", ["REPLACE_STRING_IN_LIST", ["REPLACE_STRING_IN_LIST", ["POINTER", [
                                        ["LOG", "└── ", "Added 1 resource to PARENT_CARD_NAME."],
                                        ["INCREASE_VAL", "/cardById/{{PARENT_CARD_ID}}/tokens/resource", 1]
                                    ]], "PARENT_CARD_NAME", "$PARENT_CARD.currentFace.name"], "PARENT_CARD_ID", "$PARENT_CARD.id"]
                                    ],
                                    ["COND",
                                        "$PARENT_CARD.exhausted",
                                        ["PROMPT_ADD_OPTION", "$PLAYER_N", "Ready hero", "3", ["REPLACE_STRING_IN_LIST", ["REPLACE_STRING_IN_LIST", ["POINTER", [
                                            ["LOG", "└── ", "Readied PARENT_CARD_NAME."],
                                            ["SET", "/cardById/{{PARENT_CARD_ID}}/rotation", 0],
                                            ["SET", "/cardById/{{PARENT_CARD_ID}}/exhausted", false]
                                        ]], "PARENT_CARD_NAME", "$PARENT_CARD.currentFace.name"], "PARENT_CARD_ID", "$PARENT_CARD.id"]
                                        ]
                                    ]
                                ]
                            ],
                            ["INCREASE_VAL", "/playerData/{{$THIS.controller}}/threat", 1],
                            ["TOGGLE_EXHAUST", "$THIS"]
                        ],
                        ["TRUE"],
                        ["LOG", "└── ", "The ability's conditions are not met."]
                    ]
                }
            },
            "fa030621-5b1d-4955-8d5e-3e515f546981": {"_comment": "Magic Ring", "inheritFrom": "c984e8e8-94a6-4af6-9455-824ad2cf46f9"},
            "peekAtTopCardOfEncounter": {
                "abstract": true,
                "ability": {
                    "A": ["COND",
                        ["GROUP_EMPTY", "sharedEncounterDeck"],
                        ["LOG", "{{$ALIAS_N}} tried to peek at the top of the encounter deck, but it was empty."],
                        ["TRUE"],
                        [
                            ["LOG", "{{$ALIAS_N}} peeked at the top of the encounter deck"],
                            ["VAR", "$TOP_CARD_ID", ["GET_CARD_ID", "sharedEncounterDeck", 0, 0]],
                            ["SET", "/cardById/$TOP_CARD_ID/peeking/$PLAYER_N", true]
                        ]
                    ]
                }
            },
            "51223bd0-ffd1-11df-a976-0801200c9060": {
                "_comment": "Henamarth Riversong",
                "inheritFrom": "peekAtTopCardOfEncounter"
            },
            "12951d4e-ad35-4103-8cb5-964cb1f7bfd2": {
                "_comment": "Henamarth Riversong",
                "inheritFrom": "51223bd0-ffd1-11df-a976-0801200c9060"
            },
            "e7ee6a7e-d0bb-4a6d-8999-3c3e51032ca5": {
                "_comment": "Henamarth Riversong",
                "inheritFrom": "51223bd0-ffd1-11df-a976-0801200c9060"
            }
        }
    }
}